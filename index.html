<html>
<head>
	<title>Perfect Match 2020 Results</title>
	<meta charset="UTF-8">
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:200,200i&display=swap" rel="stylesheet">
	<script type="text/javascript" src="data_helper.js"></script>
	<script type="text/javascript" src="data_generator.js"></script>
	<script type="text/javascript" src="data_vis_helper.js"></script>
	<script type="text/javascript" src="vis/demographic_vis.js"></script>
	<script type="text/javascript" src="vis/height_vis.js"></script>
	<script type="text/javascript" src="vis/sleep_vis.js"></script>
	<script type="text/javascript" src="vis/donut_poll_vis.js"></script>
	<script type="text/javascript" src="vis/personality_vis.js"></script>
	<script type="text/javascript" src="vis/commitment_vis.js"></script>
</head>
<body bgcolor = "#FB6466" style="text-align: center; margin-top: 50; color: #505050;">
	<div style="margin: 0 auto; width: 800;font-family: Montserrat; font-size: 20; font-weight: bold; color: #505050; text-align: left;">
		<h4>In 2020, 5618 students signed up to meet their perfect match. We hope to provide insights on the general trends of Cornell students as well as conversation starters for your next date! </h4>
		<h4>Over a third of Cornell's student body participated in our survey. Let's take a look at the breakdown of different demographics:</h4>
		<svg height="500" width="800" class="generalBar"></svg>

		<h4 style="margin-top: 50px;">For better or worse, height is one of the first qualities that people evaluate when looking for a significant other. Interested to see how your height compares to other students' on campus?</h4>
		<svg height="400" width="800" class="heightChart"></svg>

		<h4>Need to know the best time to plan a date or make an impromptu phone call? Here is the aggregate data on when people are most likely to fall asleep and wake up. </h4>
		<svg height="500" width="800" class="timeDials"></svg>

		<h4 style="margin-top: 50px;">Based on a series of questions, we categorized students into 1 of 16 personalities on the Myers Briggs Type Indicator. While the science behind personality compatibilities is lacking, it is still fun to compare MBTI results with your perfect match as well as to see how you compare to students within your college. </h4>
		<svg height="600" width="800" class="heatmap"></svg>

		<h4 style="margin-bottom: 50px;">In need of topics to fill that awkward silence? Here are the aggregate answers to controversial questions that we posed to our respondents. Do your answers agree with results?</h4>
		<svg height="800" width="800" class="polls"></svg>

		<h4 style="margin-top: 50px;">Before you go on that first date, you should be aware of your matches' commitment levels. Here's what people were looking to get out of Perfect Match: </h4>
		<svg height="450" width="800" class="commitmentBar"></svg>
	</div>
	<script>
		var data;
		var finalCSV;
		var padding = 25;

		var firstSvgWidth = 800;
		var firstSvgHeight = 500;
		var secSvgWidth = 800;
		var secSvgHeight = 400;
		var thirdSvgWidth = 800;
		var thirdSvgHeight = 500;
		var commitmentSvgHeight = 450;
		
		var minHeight = 51; 

		var darkTextColor = "#505050";
		var maroonColor = "#A7333F";

		var blueColor = "#88C8EA";
		var pinkColor = "#FFADC6";
		var whiteColor = "#fbfbfb";
		var lightGreyColor = "#cdcdcd";

		/** Functions for building data structures **/
		const requestInitialData = async () => {
			let initialData = await d3.csv("answer.csv");
			// console.log(initialData);

			let genderMap = getSummary(initialData, "data.gender", "total_");
			let ethnicityMap = getSummary(initialData, "data.ethnicity", "total_");
			let yearMap = getSummary(initialData, "data.year", "total_");
			let activitiesMap = getSummary(initialData, "data.activities", "total_", true);
			let collegeMap = getSummary(initialData, "data.college", "total_");

			let femaleHeightMap = {"min_height": 50, "female_height": getHeightList(initialData, true)};
			let maleHeightMap = {"male_height": getHeightList(initialData, false)};

			let finalObj = {...genderMap, ...yearMap, ...ethnicityMap, ...activitiesMap, ...collegeMap, ...femaleHeightMap, ...maleHeightMap};
			// console.log(finalObj);

			finalCSV = d3.csvFormat([finalObj]);

			let sleepTimeMap = getSleepHabits(initialData, true);
			let wakeTimeMap = getSleepHabits(initialData, false);
			requestFinalData();

			let todoMap = getSummary(initialData, "data.todolist");
			let startOverMap = getSummary(initialData, "data.startover");
			let timeMoneyMap = getSummary(initialData, "data.timeormoney");
			let qualityMap = getSummary(initialData, "data.quality");
			let planMap = getSummary(initialData, "data.plans");
			let workMap = getSummary(initialData, "data.work");
			let mealMap = getSummary(initialData, "data.meal");

			let personalityMap = getPersonalities(initialData, "data.college");

			let pMapByGender = getPersonalities(initialData, "data.gender");

			let pMap = getSummary(initialData, "personality");

			let fridayMap = getSummary(initialData, "data.friday");
			let dateMap = getSummary(initialData, "data.date");
			let perfectMap = getSummary(initialData, "data.perfectday");

			let commitment = getSummary(initialData, "data.commitment");
			
			let advMe = getSummary(initialData, "data.describepartner", "", true);

			printSortMap(fridayMap);
			console.log("");
			printSortMap(dateMap);
			console.log("");
			printSortMap(perfectMap);
			console.log("");
			printSortMap(commitment);
		};

		const requestFinalData = async () => {
			final();
		}

		requestInitialData();
		function final() {
			drawBarChart(".generalBar");
			drawHeightChart(".heightChart");
			drawSleepDials(".timeDials");
			drawPollDonuts(".polls");
			drawHeatMap(".heatmap");
			drawCommitmentBarChart(".commitmentBar");
		}
		
	</script>
</body>